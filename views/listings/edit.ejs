<% layout("layout/boilerplate") %>
<body>
    <div class="container mt-4">
        <h1>Edit Event</h1>
        <form method="POST" action="/listings/<%=listing._id%>?_method=PUT">
            <div class="mb-3">
                <label for="title" class="form-label">Title:</label>
                <input class="form-control" value="<%=listing.title%>" name="listing[title]" type="text" required>
            </div>
            <div class="mb-3">
                <label for="category" class="form-label">Category:</label>
                <select class="form-control" name="listing[category]" required>
                    <option value="Tech" <%= listing.category === 'Tech' ? 'selected' : '' %>>Tech</option>
                    <option value="Sports" <%= listing.category === 'Sports' ? 'selected' : '' %>>Sports</option>
                    <option value="Cultural" <%= listing.category === 'Cultural' ? 'selected' : '' %>>Cultural</option>
                    <option value="Workshop" <%= listing.category === 'Workshop' ? 'selected' : '' %>>Workshop</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="theme" class="form-label">Theme:</label>
                <input class="form-control" value="<%=listing.theme%>" name="listing[theme]" type="text" required>
            </div>
            <div class="mb-3">
                <label for="date" class="form-label">Date:</label>
                <input class="form-control" value="<%=new Date(listing.date).toISOString().split('T')[0]%>" name="listing[date]" type="date" required>
            </div>
            <div class="mb-3">
                <label for="mode" class="form-label">Mode:</label>
                <select class="form-control" name="listing[mode]" required>
                    <option value="Online" <%= listing.mode === 'Online' ? 'selected' : '' %>>Online</option>
                    <option value="Offline" <%= listing.mode === 'Offline' ? 'selected' : '' %>>Offline</option>
                    <option value="Hybrid" <%= listing.mode === 'Hybrid' ? 'selected' : '' %>>Hybrid</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="location" class="form-label">Location:</label>
                <input class="form-control" value="<%=listing.location%>" name="listing[location]" type="text" required>
            </div>
            <div class="mb-3">
                <label for="prize" class="form-label">Prize:</label>
                <input class="form-control" value="<%=listing.prize%>" name="listing[prize]" type="text" required>
            </div>
            <div class="mb-3">
                <label for="teamSize" class="form-label">Team Size:</label>
                <input class="form-control" value="<%=listing.teamSize%>" name="listing[teamSize]" type="text" required>
            </div>
            <div class="mb-3">
                <label for="status" class="form-label">Status:</label>
                <select class="form-control" name="listing[status]" required>
                    <option value="Open" <%= listing.status === 'Open' ? 'selected' : '' %>>Open</option>
                    <option value="Upcoming" <%= listing.status === 'Upcoming' ? 'selected' : '' %>>Upcoming</option>
                    <option value="Closing Soon" <%= listing.status === 'Closing Soon' ? 'selected' : '' %>>Closing Soon</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="image" class="form-label">Image URL:</label>
                <input class="form-control" value="<%=listing.image || ''%>" name="listing[image]" type="text">
            </div>
            <button class="btn btn-primary" type="submit">Update Event</button>
            <a href="/listings/<%=listing._id%>" class="btn btn-secondary">Cancel</a>
        </form>
    </div>
</body>
